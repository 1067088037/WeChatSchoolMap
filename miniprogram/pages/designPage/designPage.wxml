<!--pages/designPage/designPage.wxml-->
<!-- 搜索框 -->
<view class="DesignPageContainer">
  <input class="search" type="text" placeholder="搜索" placeholder-style="color:#566; font-size:28rpx"
    confirm-type="search" wx:if="{{showUploadPostArea == false && showEditStrategy == false}}"></input>
  <!-- 设计内容区 -->
  <view class="markContainer" style="margin-top:20rpx"
    wx:if="{{showUploadPostArea == false && showEditStrategy == false}}">
    <view class="uploadPoster" bindtap="nevigaToUpLoadPoster" hover-class="_hover_list">
      <image mode="heightFix" src="/images/tabBarIcon/design_selected.png">图标</image>
      <text>上传海报</text>
    </view>
  </view>
  <view class="markContainer" style="margin-top:20rpx"
    wx:if="{{showUploadPostArea == false &&showEditStrategy == false}}">
    <view class="uploadPoster" bindtap="navigaToEditStrategy" hover-class="_hover_list">
      <image mode="heightFix" src="/images/tabBarIcon/design_selected.png">图标</image>
      <text>草稿箱</text>
    </view>
  </view>
  <view class="markContainer" style="margin-top:20rpx"
    wx:if="{{showUploadPostArea == false &&showEditStrategy == false}}">
    <view class="createLifeStrategy" hover-class="_hover_list" bindtap="navigaToCreateLifeStrategy">
      <image mode="heightFix" src="/images/tabBarIcon/design_selected.png">图标</image>
      <text>添加生活攻略</text>
    </view>
  </view>
  <!-- 上传海报界面 -->
  <view class="uploadPosterArea" wx:if="{{showUploadPostArea}}">
    <button size="mini" class="post" type="primary" bindtap="sendPhoto">发表</button>
    <mp-cells>
      <mp-cell>
        <mp-uploader delete="{{true}}" title="海报上传" max-count="9" files="{{file}}" select="{{selectFile}}"
          upload="{{uplaodFile}}" bindfail="uplaodError" bindsuccess="uploadSuccess"> </mp-uploader>
        <button bindtap="backToHomePage">取消</button>
      </mp-cell>
    </mp-cells>
  </view>
  <view class="EditStrategyArea" wx:if="{{showEditStrategy && draftStrategySelected == null}}">
    <view class="unFinishStrategy">
      <view class="showStrategyForArch" bindtap="toggleArch" decode> ▼点评攻略草稿箱</view>
      <view id="strategyForArchBox" class="{{firstClickArch?'show':'hide'}} {{stateArch?'open':'close'}}">
        <scroll-view class="strategyForArchList" scroll-y="true">
          <view class="strategyForArch" wx:for="{{draftStrategies}}" wx:key="item" id="{{item.id}}"
            bindtap="EditDraftTap">
            {{item.name}}
          </view>
        </scroll-view>
      </view>
      <view class="showStrategySchool" bindtap="toggleSchool"> ▼生活攻略草稿箱</view>
      <view id="strategyForSchoolBox" class="{{firstClickSchool?'show':'hide'}} {{stateSchool?'open':'close'}}">
        <scroll-view class="strategySchoolList" scroll-y="true">
          <view class="strategyForSchool" wx:for="{{[1,2,3]}}" wx:key="item">
            null
          </view>
        </scroll-view>
      </view>
    </view>
  </view>
  <view wx:if="{{draftStrategySelected!= null}}">
    <view class="newStrategies">
      <view class="uploadPicture">
        <mp-uploader bindfail="uploadError" bindsuccess="uploadPhotoesSuccess" select="{{selectFile}}"
          upload="{{uplaodFile}}" files="{{files}}" max-count="9" title="" binddelete="deletePhotoes"></mp-uploader>
      </view>
      <view class="inputStrategyTitle">
        <input type="text" name="" id="" placeholder="这里输入标题" bindinput="inputStrategyTitle"
          value="{{draftStrategySelected.content[0].name}}"></input>
      </view>
      <view class="inputStrategyShortBriefIntro">
        <input type="text" name="" id="" placeholder="好的简介更引人入胜噢~" bindinput="inputStrategyBriefIntro"
          value="{{draftStrategySelected.desc}}">
        </input>
      </view>
      <view class="inputMainBody">
        <textarea name="" id="" cols="30" rows="10" placeholder="添加正文" bindinput="inputStrategyMainBody"
          value="{{draftStrategySelected.content[0].desc}}">
        </textarea>
      </view>
      <view class="StrategyButtonSet">
        <view class="cancelNewStrategy">
          <button style="width:100%" bindtap="isShowSaveEditDialog">取消</button>
        </view>
        <view class="createNewStrategy">
          <button style="color:white;" bindtap="publishDraft">发布攻略</button>
        </view>
      </view>
      <mp-dialog show="{{isExitEditStrategy}}" buttons="{{dialogButtons}}" bindbuttontap="isSaveEdit">
        <view>是否需要保存编辑记录</view>
      </mp-dialog>
      <view class="deleteStrategy" style="height:45rpx;width:40rpx">
        <button style="width:100%;height:100%;position:absolute;opacity:0;"></button>
        <image src="cloud://cloud1-4gd8s9ra41d160d3.636c-cloud1-4gd8s9ra41d160d3-1305608874/Global/images/delete.png"
          mode="scaleToFill" style="width:100%;height:100%"></image>
      </view>
    </view>
  </view>
</view>