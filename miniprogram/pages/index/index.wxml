<!--pages/schoolMap/schoolMap.wxml-->
<view class="Container">
  <map id="myMap" style="width:750rpx;height:1600rpx;" latitude="{{latitude}}" longitude="{{longitude}}" scale="17"
    rotate="240" skew="35"  markers="{{markers}}">
    <!-- 以下按钮用于获取屏幕中心的经纬度，主要是测试开发用，实际上线可以删去 -->
    <cover-view class="centerLocation" style="padding:50 0; width:80rpx; height:80rpx; position:relative">
      <button class="btn-getLoc" bindtap="getCenterLocation"
        style="width:100%;height:100%;position:absolute;opacity:0;">
      </button>
      <cover-image src="/images/index/centerLocation.png" mode="scaleToFill">
      </cover-image>
    </cover-view>

    <!-- 添加图标的实现 -->
    <cover-view class="moreFunctionIcon">
      <cover-image class="more" bindtap="showFunction" src="/images/global/add.png"></cover-image>
    </cover-view>
    <!-- 选择功能页面的实现 -->
    <cover-view>
      <cover-view wx:if="{{isMoreTrue}}">
        <cover-view class="funcMask{{isMoreTrue?'isMoreShow':'isMoreHide'}}">
          <cover-view class='funcMaskContent'>
            <cover-view class='funcMaskText' wx:for='{{functions}}' wx:for-index='index' wx:key="index">
              <cover-view class="index">{{index+1}}</cover-view>
              <button class="item" bindtap="popup" data-item="{{item}}">{{item}}</button>
            </cover-view>
          </cover-view>
        </cover-view>
      </cover-view>
    </cover-view>

    <!-- 实现点击功能弹出相应的页面 -->
    <page-container show="{{showPage}}" overlay="{{overlay}}" close-on-slide-down duration="{{pageDuration}}"
      position="{{pagePosition}}" bindbeforeenter="onBeforeEnter" bindenter="onEnter" bindafterenter="onAfterEnter"
      bindbeforeleave="onBeforeLeave" bindleave="onLeave" bindafterleave="onAfterLeave"
      bindclickoverlay="onClickOverlay">
      <!-- 海报界面 -->
      <cover-view wx:if="{{func=='海报'}}">
        <cover-view class="title">
          <cover-view>最新活动</cover-view>
          <cover-view>更多>></cover-view>
        </cover-view>
        <scroll-view class="scrollPost" scroll-y="true">
          <cover-view class="post">
            <cover-view>
              <cover-view>绿植领养活动</cover-view>
              <cover-image
                src="cloud://cloud1-4gd8s9ra41d160d3.636c-cloud1-4gd8s9ra41d160d3-1305608874/Global/posters/绿植领养活动.png">
              </cover-image>
            </cover-view>
            <cover-view>
              <cover-view>绿植领养活动</cover-view>
              <cover-image
                src="cloud://cloud1-4gd8s9ra41d160d3.636c-cloud1-4gd8s9ra41d160d3-1305608874/Global/posters/绿植领养活动.png">
              </cover-image>
            </cover-view>
            <cover-view>
              <cover-view>绿植领养活动</cover-view>
              <cover-image
                src="cloud://cloud1-4gd8s9ra41d160d3.636c-cloud1-4gd8s9ra41d160d3-1305608874/Global/posters/绿植领养活动.png">
              </cover-image>
            </cover-view>
          </cover-view>
        </scroll-view>
      </cover-view>
      <!-- 搜索框 -->
      <cover-view wx:if="{{func=='搜索'}}">
        <input type="text" placeholder="搜索" placeholder-style="color:#566; font-size:28rpx" confirm-type="search"></input>
      </cover-view>
      <!-- 筛选界面 -->
      <cover-view wx:if="{{func=='筛选'}}">
        <button bindtap="DormOnly" style="display: block;margin: 24px auto; background-color: blue;color:white;height: 50rpx; text-align:center" >宿舍</button>
        <button bindtap="ClassRoomOnly" style="display: block;margin: 24px auto; background-color: blue;color:white;height: 50rpx;text-align:center">教学楼</button>
        <button bindtap="collgeOnly" style="display: block;margin: 24px auto; background-color: blue;color:white;height: 50rpx;text-align:center">学院</button>
        <button bindtap="canteenOnly" style="display: block;margin: 24px auto; background-color: blue;color:white;height: 50rpx;text-align:center">吃饭</button>
      </cover-view>
      <!-- 返回按钮 -->
      <button class="screen2-button" bindtap="showPrev" hidden="{{!showPage}}" hover-class="none"
        style="display: block;margin: 24px auto; background-color: blue;color:white;height: 50rpx;">Exit</button>
    </page-container>

  </map>
</view>